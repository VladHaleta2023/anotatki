(()=>{var e={};e.id=974,e.ids=[974],e.modules={363:(e,t,s)=>{"use strict";s.d(t,{s:()=>i});var a=s(5803),r=s(2927);class i{constructor(){}static handleError(e){let t=e.response?.status||500,s=Array.isArray(e.response?.data?.message)?e.response?.data?.message[0]:e.response?.data?.message||"Unknown error";(0,r.A)(t,s)}static handleResponseMessage(e,t){let s=Array.isArray(t)?t[0]:t||"OK";(0,r.A)(e,s)}static async request(e,t,s){try{let r;switch(e){case"get":r=await a.A.get(t);break;case"post":r=await a.A.post(t,s);break;case"put":r=await a.A.put(t,s);break;case"delete":r=await a.A.delete(t);break;default:throw Error("Unsupported method")}return r.data}catch(e){return this.handleError(e),null}}static async fetchTopics(e){try{let t=await this.request("get",`/categories/${e}/topics`);if(t&&200===t.statusCode&&t.data)return t.data;let s=t?.message?.[0]||"Unknown error";return(0,r.A)(t?.statusCode||500,s),[]}catch(e){return(0,r.A)(500,String(e)),[]}}static async createTopic(e,t){let s=await this.request("post",`/categories/${e}/topics`,{title:t});return!!s&&(this.handleResponseMessage(s.statusCode||200,s.message),!0)}static async fetchTopicByIdTitle(e,t){if(!t||"Main Body"===t)return"";try{let s=await this.request("get",`/categories/${e}/topics/${t}`);if(s&&200===s.statusCode&&s.data?.current)return s.data.current.title;let a=s?.message?.[0]||"Unknown error";return(0,r.A)(s?.statusCode||500,a),""}catch(e){return(0,r.A)(500,String(e)),""}}static async fetchTopicById(e,t){if(!t||"Main Body"===t)return null;try{let s=await this.request("get",`/categories/${e}/topics/${t}`);if(s&&200===s.statusCode&&s.data?.current)return s.data;let a=s?.message?.[0]||"Unknown error";return(0,r.A)(s?.statusCode||500,a),null}catch(e){return(0,r.A)(500,String(e)),null}}static async updateTopic(e,t,s){let a=await this.request("put",`/categories/${e}/topics/${t}`,{title:s});return!!a&&(this.handleResponseMessage(a.statusCode||200,a.message),!0)}static async updateTopicNotes(e,t,s){let a=await this.request("put",`/categories/${e}/topics/${t}/notes`,{content:s});return!!a&&(this.handleResponseMessage(a.statusCode||200,a.message),!0)}static async deleteTopic(e,t){let s=await this.request("delete",`/categories/${e}/topics/${t}`);return!!s&&(this.handleResponseMessage(s.statusCode||200,s.message),!0)}}},846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},1204:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});let a=(0,s(2907).registerClientReference)(function(){throw Error("Attempted to call the default export of \"/home/ubuntu/Desktop/Accounting-Notes/accounting-notes-frontend/src/app/page.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/home/ubuntu/Desktop/Accounting-Notes/accounting-notes-frontend/src/app/page.tsx","default")},1476:(e,t,s)=>{Promise.resolve().then(s.bind(s,9751))},1630:e=>{"use strict";e.exports=require("http")},1820:e=>{"use strict";e.exports=require("os")},2412:e=>{"use strict";e.exports=require("assert")},3033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},3873:e=>{"use strict";e.exports=require("path")},3997:e=>{"use strict";e.exports=require("tty")},4075:e=>{"use strict";e.exports=require("zlib")},4735:e=>{"use strict";e.exports=require("events")},5485:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>o.a,__next_app__:()=>u,pages:()=>d,routeModule:()=>p,tree:()=>l});var a=s(5239),r=s(8088),i=s(8170),o=s.n(i),n=s(893),c={};for(let e in n)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(c[e]=()=>n[e]);s.d(t,c);let l=["",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,1204)),"/home/ubuntu/Desktop/Accounting-Notes/accounting-notes-frontend/src/app/page.tsx"]}]},{layout:[()=>Promise.resolve().then(s.bind(s,4431)),"/home/ubuntu/Desktop/Accounting-Notes/accounting-notes-frontend/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,7398,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(s.t.bind(s,9999,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(s.t.bind(s,5284,23)),"next/dist/client/components/unauthorized-error"]}],d=["/home/ubuntu/Desktop/Accounting-Notes/accounting-notes-frontend/src/app/page.tsx"],u={require:s,loadChunk:()=>Promise.resolve()},p=new a.AppPageRouteModule({definition:{kind:r.RouteKind.APP_PAGE,page:"/page",pathname:"/",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:l}})},5511:e=>{"use strict";e.exports=require("crypto")},5591:e=>{"use strict";e.exports=require("https")},6335:()=>{},7655:(e,t,s)=>{Promise.resolve().then(s.bind(s,1204))},7910:e=>{"use strict";e.exports=require("stream")},8354:e=>{"use strict";e.exports=require("util")},9021:e=>{"use strict";e.exports=require("fs")},9121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},9274:(e,t,s)=>{"use strict";s.d(t,{v:()=>i});var a=s(5803),r=s(2927);class i{constructor(){}static handleError(e){let t=e.response?.status||500,s=Array.isArray(e.response?.data?.message)?e.response?.data?.message[0]:e.response?.data?.message||"Unknown error";(0,r.A)(t,s)}static handleResponseMessage(e,t){let s=Array.isArray(t)?t[0]:t||"OK";(0,r.A)(e,s)}static async request(e,t,s){try{let r;switch(e){case"get":r=await a.A.get(t);break;case"post":r=await a.A.post(t,s);break;case"put":r=await a.A.put(t,s);break;case"delete":r=await a.A.delete(t);break;default:throw Error("Unsupported method")}return r.data}catch(e){return this.handleError(e),null}}static async fetchCategories(){try{let e=await this.request("get","/categories");if(e&&200===e.statusCode&&e.data)return e.data;let t=e?.message?.[0]||"Unknown error";return(0,r.A)(e?.statusCode||500,t),[]}catch(e){return(0,r.A)(500,String(e)),[]}}static async createCategory(e){let t=await this.request("post","/categories",{name:e});return!!t&&(this.handleResponseMessage(t.statusCode||200,t.message),!0)}static async updateCategory(e,t){let s=await this.request("put",`/categories/${e}`,{name:t});return!!s&&(this.handleResponseMessage(s.statusCode||200,s.message),!0)}static async deleteCategory(e){let t=await this.request("delete",`/categories/${e}`);return!!t&&(this.handleResponseMessage(t.statusCode||200,t.message),!0)}}},9294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},9551:e=>{"use strict";e.exports=require("url")},9751:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>z});var a=s(687),r=s(3210),i=s(2927),o=s(9274),n=s(363);s(8754),s(1632);var c=s(4724);let l=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),d=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,s)=>s?s.toUpperCase():t.toLowerCase()),u=e=>{let t=d(e);return t.charAt(0).toUpperCase()+t.slice(1)},p=(...e)=>e.filter((e,t,s)=>!!e&&""!==e.trim()&&s.indexOf(e)===t).join(" ").trim(),h=e=>{for(let t in e)if(t.startsWith("aria-")||"role"===t||"title"===t)return!0};var m={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let g=(0,r.forwardRef)(({color:e="currentColor",size:t=24,strokeWidth:s=2,absoluteStrokeWidth:a,className:i="",children:o,iconNode:n,...c},l)=>(0,r.createElement)("svg",{ref:l,...m,width:t,height:t,stroke:e,strokeWidth:a?24*Number(s)/Number(t):s,className:p("lucide",i),...!o&&!h(c)&&{"aria-hidden":"true"},...c},[...n.map(([e,t])=>(0,r.createElement)(e,t)),...Array.isArray(o)?o:[o]])),x=(e,t)=>{let s=(0,r.forwardRef)(({className:s,...a},i)=>(0,r.createElement)(g,{ref:i,iconNode:t,className:p(`lucide-${l(u(e))}`,`lucide-${e}`,s),...a}));return s.displayName=u(e),s},y=x("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]),v=x("square-pen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]),f=x("trash-2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);var w=s(3011),b=s(209),C=s(6189),j=s(8437);function k({isAdminOn:e,categories:t,onRefresh:s}){let n=(0,C.useRouter)(),[c,l]=(0,r.useState)(!1),[d,u]=(0,r.useState)(!1),[p,h]=(0,r.useState)(null),m=(e,t)=>{sessionStorage.setItem("activeCategory",e),sessionStorage.setItem("activeCategoryName",t),window.location.reload()},g=async()=>{if(l(!1),p){u(!0);try{await o.v.deleteCategory(p),await s()}catch(e){(0,i.A)(500,`Błąd usuwania: ${e}`)}finally{u(!1),h(null)}}},x=(e,t)=>{sessionStorage.setItem("activeCategory",e),sessionStorage.setItem("activeCategoryName",t),n.push("/edit")};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(w.A,{visible:c,setVisible:l,message:`Czy na pewno chcesz usunąć tą kategorię?`,textConfirm:"Tak",textCancel:"Nie",onConfirm:g}),(0,a.jsx)("main",{children:d?(0,a.jsx)(j.A,{}):(0,a.jsxs)("div",{className:"form",children:[e&&(0,a.jsx)("button",{className:"btnProperty",onClick:()=>{n.push("/add")},children:(0,a.jsx)(y,{size:24})}),(0,a.jsxs)("div",{className:"formTable no-select",children:[(0,a.jsx)("div",{className:"element elementTitle",children:"Kategorie"}),t.map(t=>(0,a.jsxs)("div",{className:"element",onClick:()=>m(t.id,t.name),role:"button",tabIndex:0,onKeyDown:e=>{"Enter"===e.key&&m(t.id,t.name)},children:[(0,a.jsx)("div",{className:"text",children:(0,b.iU)(t.name)}),e&&(0,a.jsxs)("div",{className:"btnsContent",children:[(0,a.jsx)("button",{className:"btnContent",onClick:e=>{e.stopPropagation(),x(t.id,t.name)},children:(0,a.jsx)(v,{size:24})}),(0,a.jsx)("button",{className:"btnContent",onClick:e=>{e.stopPropagation(),h(t.id),l(!0)},"aria-label":"Usuń",children:(0,a.jsx)(f,{size:24})})]})]},t.id))]})]})})]})}let N=x("arrow-up",[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]]);function A({isAdminOn:e,activeCategory:t,activeCategoryName:s,topics:o,refreshTopics:c}){let l=(0,C.useRouter)(),[d,u]=(0,r.useState)(!1),[p,h]=(0,r.useState)(!1),[m,g]=(0,r.useState)(null),x=async()=>{if(h(!1),t&&m){u(!0);try{await n.s.deleteTopic(t,m),await c()}catch(e){(0,i.A)(500,`Błąd usuwania: ${e}`)}finally{u(!1)}}},k=(e,t)=>{sessionStorage.setItem("activeTopic",e),sessionStorage.setItem("activeTopicName",t),l.push("/edit")},A=(e,t)=>{sessionStorage.setItem("activeTopic",e),sessionStorage.setItem("activeTopicName",t),window.location.reload()};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(w.A,{visible:p,setVisible:h,message:"Czy na pewno chcesz usunąć ten temat?",textConfirm:"Tak",textCancel:"Nie",onConfirm:x}),(0,a.jsx)("main",{children:d?(0,a.jsx)(j.A,{}):(0,a.jsxs)("div",{className:"form",children:[(0,a.jsx)("button",{className:"btnProperty",onClick:()=>{sessionStorage.setItem("activeCategory","Main Body"),sessionStorage.setItem("activeCategoryName","Kategorie"),sessionStorage.setItem("activeTopicName",""),l.refresh()},children:(0,a.jsx)(N,{size:24})}),e&&(0,a.jsx)("button",{className:"btnProperty",onClick:()=>{l.push("/add")},children:(0,a.jsx)(y,{size:24})}),(0,a.jsxs)("div",{className:"formTable no-select",children:[(0,a.jsx)("div",{className:"element elementTitle",children:s}),o.map(t=>(0,a.jsxs)("div",{className:"element",role:"button",tabIndex:0,onKeyDown:e=>"Enter"===e.key&&A(t.id,t.title),onClick:()=>A(t.id,t.title),children:[(0,a.jsx)("div",{className:"text",children:(0,b.iU)(t.title)}),e&&(0,a.jsxs)("div",{className:"btnsContent",children:[(0,a.jsx)("button",{className:"btnContent",onClick:e=>{e.stopPropagation(),k(t.id,t.title)},children:(0,a.jsx)(v,{size:24})}),(0,a.jsx)("button",{className:"btnContent",onClick:e=>{e.stopPropagation(),g(t.id),h(!0)},"aria-label":"Usuń",children:(0,a.jsx)(f,{size:24})})]})]},t.id))]})]})})]})}let S=x("arrow-left",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]),T=x("arrow-right",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]),q=x("pause",[["rect",{x:"14",y:"4",width:"4",height:"16",rx:"1",key:"zuxfzm"}],["rect",{x:"6",y:"4",width:"4",height:"16",rx:"1",key:"1okwgv"}]]),I=x("play",[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]]);function M({isAdminOn:e,categoryId:t,topicId:s,textTitle:o}){let[c,l]=(0,r.useState)(""),[d,u]=(0,r.useState)(""),[p,h]=(0,r.useState)(null),[m,g]=(0,r.useState)(!0),x=(0,r.useRef)(null),[y,v]=(0,r.useState)(!1),[f,w]=(0,r.useState)(0),[b,C]=(0,r.useState)("0:00"),[k,A]=(0,r.useState)("0:00"),M=(0,r.useRef)(null),z=(0,r.useCallback)(()=>{setTimeout(()=>{M.current?.scrollIntoView({behavior:"smooth",block:"center"})},350)},[]),P=async()=>{if(s)try{await n.s.updateTopicNotes(t,s,c),setTimeout(()=>{window.location.reload()},2e3)}catch(e){(0,i.A)(500,`Błąd zapisywania notatek: ${e}`)}};return(0,a.jsx)(a.Fragment,{children:m?(0,a.jsx)("main",{children:(0,a.jsx)(j.A,{})}):(0,a.jsx)("main",{children:(0,a.jsxs)("div",{className:"form",children:[(0,a.jsxs)("div",{className:"btnsNotes",children:[(0,a.jsxs)("div",{className:"btnsNavigation",children:[(0,a.jsx)("button",{className:"btnProperty",onClick:()=>{sessionStorage.removeItem("activeTopic"),sessionStorage.removeItem("activeTopicName"),window.location.reload()},style:{marginBottom:0},children:(0,a.jsx)(N,{size:24})}),p?.behavior&&(0,a.jsx)("button",{className:"btnProperty",onClick:()=>{let e=p?.behavior?.id;e&&(sessionStorage.setItem("activeTopic",e),sessionStorage.setItem("activeTopicName",p?.behavior?.title||""),window.location.reload())},style:{marginBottom:0},children:(0,a.jsx)(S,{size:24})}),p?.next&&(0,a.jsx)("button",{className:"btnProperty",onClick:()=>{let e=p?.next?.id;e&&(sessionStorage.setItem("activeTopic",e),sessionStorage.setItem("activeTopicName",p?.next?.title||""),window.location.reload())},style:{marginBottom:0},children:(0,a.jsx)(T,{size:24})})]}),e&&(0,a.jsx)("button",{className:"btnSaveNotes",onClick:P,children:"Zapisz"})]}),(0,a.jsxs)("div",{className:"form-notes word-break",children:[(0,a.jsxs)("div",{className:"audio-player",children:[(0,a.jsxs)("div",{className:"audio-controls",children:[(0,a.jsx)("button",{className:"btnOption",onClick:()=>{v(e=>!e)},children:y?(0,a.jsx)(q,{size:24}):(0,a.jsx)(I,{size:24})}),(0,a.jsxs)("div",{style:{marginLeft:8,flexGrow:1},children:[(0,a.jsx)("progress",{value:f,max:100,className:"progress-bar",style:{width:"100%"}}),(0,a.jsxs)("div",{style:{fontSize:14},children:[b," / ",k]})]})]}),(0,a.jsx)("audio",{ref:x,preload:"metadata",onEnded:()=>v(!1)})]}),(0,a.jsx)("div",{className:"title-notes",children:o}),(0,a.jsx)("hr",{}),(0,a.jsx)("div",{style:{height:12}}),(0,a.jsx)("div",{ref:M,className:"text",contentEditable:e,suppressContentEditableWarning:!0,role:"textbox","aria-multiline":"true","data-placeholder":e?"Wprowadź notatki...":"",onFocus:z,onInput:e=>{let t=e.target;l(t.innerText),t.style.height="auto",t.style.height=t.scrollHeight+"px",t.scrollTop=t.scrollHeight},onPaste:e=>{e.preventDefault();let t=e.clipboardData.getData("text/plain"),s=window.getSelection();if(!s||!s.rangeCount)return;let a=s.getRangeAt(0);a.deleteContents();let r=document.createTextNode(t);a.insertNode(r),a.setStartAfter(r),a.setEndAfter(r),s.removeAllRanges(),s.addRange(a);let i=M.current;i&&(l(i.innerText),i.style.height="auto",i.style.height=i.scrollHeight+"px",i.scrollTop=i.scrollHeight)},spellCheck:!1,style:{whiteSpace:"pre-wrap",outline:"none",cursor:e?"text":"default",overflowY:"hidden",fontSize:"16px"}})]})]})})})}function z(){let[e,t]=(0,r.useState)(!1),[s,l]=(0,r.useState)([]),[d,u]=(0,r.useState)([]),[p,h]=(0,r.useState)(!1),[m,g]=(0,r.useState)("Main Body"),[x,y]=(0,r.useState)("Kategorie"),[v,f]=(0,r.useState)(null),[w,b]=(0,r.useState)(null),C=(0,r.useCallback)(async()=>{try{let e=await o.v.fetchCategories();if(l(e),m&&"Main Body"!==m){let e=await n.s.fetchTopics(m);u(e)}else u([])}catch(e){(0,i.A)(500,`Server error: ${e}`)}},[m]);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(c.A,{categories:s,isAdminOn:e,activeCategory:m,activeCategoryName:x,activeTopic:v,activeTopicName:w,updateSelection:(e,t,s,a)=>{g(e??"Main Body"),y(t??"Kategorie"),f(s),b(a),e?sessionStorage.setItem("activeCategory",e):sessionStorage.removeItem("activeCategory"),t?sessionStorage.setItem("activeCategoryName",t):sessionStorage.removeItem("activeCategoryName"),s?sessionStorage.setItem("activeTopic",s):sessionStorage.removeItem("activeTopic"),a?sessionStorage.setItem("activeTopicName",a):sessionStorage.removeItem("activeTopicName"),e&&"Main Body"!==e?n.s.fetchTopics(e).then(u).catch(e=>(0,i.A)(500,`Server error: ${e}`)):u([])}}),p?(0,a.jsx)("main",{children:(0,a.jsx)(j.A,{})}):"Main Body"===m?(0,a.jsx)(k,{isAdminOn:e,categories:s,activeCategory:m,onRefresh:C}):v?(0,a.jsx)(M,{isAdminOn:e,categoryId:m,topicId:v,textTitle:w||""}):(0,a.jsx)(A,{isAdminOn:e,activeCategory:m,activeCategoryName:x,topics:d,refreshTopics:C})]})}s(6335)}};var t=require("../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),a=t.X(0,[285,560,541],()=>s(5485));module.exports=a})();