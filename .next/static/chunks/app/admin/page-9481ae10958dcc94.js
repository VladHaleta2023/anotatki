(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[698],{436:(e,t,s)=>{"use strict";s.d(t,{A:()=>n});var a=s(5155);function n(){return(0,a.jsx)("div",{className:"spinner-container","aria-label":"Loading...",children:(0,a.jsx)("div",{className:"spinner"})})}s(2115),s(755)},755:()=>{},2403:()=>{},2563:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>u});var a=s(5155),n=s(2115);s(3574);var i=s(6162),o=s(9014),r=s(63),l=s(6246),c=s(6096),d=s(436);function u(){let e=(0,r.useRouter)(),[t,s]=(0,n.useState)(""),[u,m]=(0,n.useState)(!1),[p,v]=(0,n.useState)(null),[h,g]=(0,n.useState)(null),[x,y]=(0,n.useState)(null),[w,f]=(0,n.useState)(null),[N,S]=(0,n.useState)(!1);(0,n.useEffect)(()=>{(async()=>{S(!0),m((0,c.S0)()),v(sessionStorage.getItem("activeCategory")),g(sessionStorage.getItem("activeCategoryName")),y(sessionStorage.getItem("activeTopic")),f(sessionStorage.getItem("activeTopicName")),S(!1)})()},[]);let j=(0,n.useCallback)((e,t,s,a)=>{v(e),g(t),y(s),f(a),e?sessionStorage.setItem("activeCategory",e):sessionStorage.removeItem("activeCategory"),t?sessionStorage.setItem("activeCategoryName",t):sessionStorage.removeItem("activeCategoryName"),s?sessionStorage.setItem("activeTopic",s):sessionStorage.removeItem("activeTopic"),a?sessionStorage.setItem("activeTopicName",a):sessionStorage.removeItem("activeTopicName")},[]);async function b(){var s,a,n,r,l;try{let a=await o.A.post("/users/admin/login",{username:"admin",password:t}),n=(null==(s=a.data.message)?void 0:s[0])||"OK";return(0,i.A)(a.data.statusCode,n),sessionStorage.setItem("adminStatus","true"),e.push("/"),!0}catch(s){let e=(null==(a=s.response)?void 0:a.status)||500,t=(null==(l=s.response)||null==(r=l.data)||null==(n=r.message)?void 0:n[0])||"Unknown error";return(0,i.A)(e,t),sessionStorage.setItem("adminStatus","false"),!1}}return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(l.A,{isAdminOn:u,visible:!1,activeCategory:p,activeCategoryName:h,updateSelection:j,activeTopic:x,activeTopicName:w}),(0,a.jsx)("main",{children:N?(0,a.jsx)(d.A,{}):(0,a.jsx)("div",{className:"form",children:(0,a.jsxs)("div",{className:"formTable no-select",children:[(0,a.jsx)("label",{htmlFor:"username",children:"Użytkownik"}),(0,a.jsx)("input",{id:"username",name:"username",type:"text",value:"admin",autoComplete:"username",readOnly:!0}),(0,a.jsx)("br",{}),(0,a.jsx)("label",{htmlFor:"password",children:"Hasło"}),(0,a.jsx)("input",{id:"password",name:"password",type:"password",value:t,onChange:e=>s(e.target.value),placeholder:"Wprowadź Hasło Admina"}),(0,a.jsxs)("div",{className:"btnsSwitchPopUp",style:{marginTop:"20px"},children:[(0,a.jsx)("button",{style:{width:"200px",maxWidth:"200px"},className:"btnSwicthPopUp confirm",onClick:b,children:"Potwierdź"}),(0,a.jsx)("button",{style:{width:"200px",maxWidth:"200px"},className:"btnSwicthPopUp cancel-on-white",onClick:function(){e.push("/")},children:"Anuluj"})]})]})})})]})}},3574:()=>{},3690:(e,t,s)=>{Promise.resolve().then(s.bind(s,2563))},4139:()=>{},4698:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});var a=s(5155),n=s(2115);s(8380),s(8446);var i=s(6162);function o(e){let{visible:t=!1,textConfirm:s="Confirm",textCancel:o="Cancel",isMessageVisible:r=!0,message:l="Message",children:c=null,bodyMaxWidth:d="600px",btnsWidth:u="200px",onClose:m,onConfirm:p}=e;if((0,n.useEffect)(()=>(t?(document.body.style.overflow="hidden",document.body.style.touchAction="none"):(document.body.style.overflow="",document.body.style.touchAction=""),()=>{document.body.style.overflow="",document.body.style.touchAction=""}),[t]),!t)return null;let v=async()=>{try{p&&await p()}catch(e){(0,i.A)(500,"Server error: ".concat(e))}};return(0,a.jsx)("div",{className:"popup-overlay",children:(0,a.jsxs)("div",{className:"switchPopUp word-break no-select",style:{maxWidth:d},children:[r?(0,a.jsx)("div",{className:"text",children:l}):null,c,(0,a.jsxs)("div",{className:"btnsSwitchPopUp",children:[(0,a.jsx)("button",{style:{width:u,maxWidth:u},className:"btnSwicthPopUp confirm",onClick:v,children:s}),(0,a.jsx)("button",{style:{width:u,maxWidth:u},className:"btnSwicthPopUp cancel",onClick:m,children:o})]})]})})}function r(e){let{visible:t=!0,message:s="Message",textConfirm:n="Yes",textCancel:i="No",btnsWidth:r="100px",bodyMaxWidth:l="600px",setVisible:c,onConfirm:d}=e,u=async()=>{try{d&&await d()}finally{c(!1)}};return(0,a.jsx)(o,{visible:t,onClose:()=>c(!1),onConfirm:u,isMessageVisible:!0,message:s,textConfirm:n,textCancel:i,bodyMaxWidth:l,btnsWidth:r})}},6096:(e,t,s)=>{"use strict";s.d(t,{S0:()=>o,iU:()=>i});var a=s(5155),n=s(2115);function i(e){let t=e.split("\n");return t.map((e,s)=>(0,a.jsxs)(n.Fragment,{children:[e,s<t.length-1&&(0,a.jsx)("br",{})]},s))}function o(){return"true"===(sessionStorage.getItem("adminStatus")||"false")}},6162:(e,t,s)=>{"use strict";s.d(t,{A:()=>n});var a=s(2008);function n(e,t){e>=200&&e<300?a.oR.success(t):e>=400&&e<500?a.oR.warning(t):a.oR.error(t)}},6246:(e,t,s)=>{"use strict";s.d(t,{A:()=>d});var a=s(5155),n=s(2115),i=s(6162),o=s(9014),r=s(4698),l=s(63);function c(e){let{categories:t,activeCategory:s,activeTopic:i,visible:o=!0,setActiveCategory:r,setActiveTopic:c}=e,d=(0,l.useRouter)(),[u,m]=(0,n.useState)(!1),[p,v]=(0,n.useState)(new Set),h=(0,n.useRef)(null);(0,n.useEffect)(()=>{if(!o)return;let e=e=>{h.current&&!h.current.contains(e.target)&&m(!1)};return u?document.addEventListener("mousedown",e):document.removeEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}},[u,o]);let g=(e,t)=>{if(!o)return;let s=new Set(p);s.has(e)?s.delete(e):s.add(e),v(s),r(e,t),d.push("/")};return(0,n.useEffect)(()=>{if(!o)return;let e=()=>{let e=sessionStorage.getItem("activeCategory"),t=sessionStorage.getItem("activeCategoryName"),a=sessionStorage.getItem("activeTopic"),n=sessionStorage.getItem("activeTopicName");e&&t&&(!s||s!==e)&&r(e,t),a&&n&&(!i||i!==a)&&(c(null!=e?e:"",a,n,null!=t?t:""),v(t=>{let s=new Set(t);return e&&s.add(e),s}))};return window.addEventListener("storage",e),e(),()=>{window.removeEventListener("storage",e)}},[s,i,r,c,o]),(0,a.jsxs)("div",{className:"dropdown no-select word-break",ref:h,children:[(0,a.jsxs)("button",{className:"dropbtn",onClick:()=>{o&&m(e=>!e)},"aria-expanded":u,"aria-haspopup":"true","aria-label":"Toggle menu",children:[(0,a.jsx)("div",{className:"menuLine",style:{backgroundColor:u?"#577A99":"white"}}),(0,a.jsx)("div",{className:"menuLine",style:{backgroundColor:u?"#577A99":"white"}}),(0,a.jsx)("div",{className:"menuLine",style:{backgroundColor:u?"#577A99":"white"}})]}),(0,a.jsxs)("div",{className:"dropdown-content ".concat(u?"show":""),children:[(0,a.jsx)("div",{className:"element ".concat("Main Body"!==s||i?"":"active"),onClick:()=>g("Main Body","Kategorie"),children:(0,a.jsx)("span",{children:"Kategorie"})}),t.map(e=>{var t;return(0,a.jsxs)(n.Fragment,{children:[(0,a.jsxs)("div",{className:"element ".concat(s!==e.id||i?"":"active"),onClick:()=>{var t;return g(e.id,null!=(t=e.name)?t:"Nieznana")},children:[(0,a.jsx)("span",{children:null!=(t=e.name)?t:""}),e.topics.length>0&&(0,a.jsx)("span",{className:"dropIcon",children:p.has(e.id)?"▲":"▼"})]}),e.topics.length>0&&p.has(e.id)&&(0,a.jsx)("div",{className:"topics show",children:e.topics.map(t=>{var s;return(0,a.jsx)("div",{className:"element topic ".concat(i===t.id?"active":""),onClick:()=>{var s,a,n,i,r,l;return n=e.id,i=t.id,r=null!=(s=t.title)?s:"Nieznana",l=null!=(a=e.name)?a:"Nieznana",void(o&&(c(n,i,r,l),d.push("/")))},children:null!=(s=t.title)?s:""},t.id)})})]},e.id)})]})]})}function d(e){let{visible:t=!0,categories:s=[],isAdminOn:d,activeCategory:u,activeCategoryName:m,activeTopic:p,activeTopicName:v,updateSelection:h}=e,g=(0,l.useRouter)(),[x,y]=(0,n.useState)(!1),w=async()=>{try{let e=await o.A.post("/users/admin/logout"),t=e.data.message[0];(0,i.A)(e.data.statusCode,t)}catch(s){if(s.response){var e,t;let a=s.response.status,n=(null==(t=s.response.data)||null==(e=t.message)?void 0:e[0])||"Unknown error";(0,i.A)(a,n)}else s.request?(0,i.A)(500,"No response from server"):(0,i.A)(500,"Request setup error")}finally{sessionStorage.setItem("adminStatus","false"),y(!1),window.location.reload()}},f=async()=>{d?y(!0):g.push("/admin")};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(r.A,{visible:x,setVisible:y,message:"Czy na pewno chcesz wyłączyć tryb Admina?",textConfirm:"Tak",textCancel:"Nie",onConfirm:async()=>{await w()}}),(0,a.jsxs)("header",{className:"header",children:[(0,a.jsx)(c,{visible:t,categories:s,activeCategory:u,activeCategoryName:m,activeTopic:p,activeTopicName:v,setActiveCategory:(e,t)=>h(e,t,null,null),setActiveTopic:(e,t,s,a)=>h(e,null!=a?a:m,t,s)}),(0,a.jsx)("span",{style:{fontSize:"26px",marginLeft:"14px"},children:"ANotatki"}),(0,a.jsxs)("button",{className:"btnHeader",onClick:f,children:["Admin: ",d?"on":"off"]})]})]})}s(8380),s(4139),s(2403)},8380:()=>{},8446:()=>{},9014:(e,t,s)=>{"use strict";s.d(t,{A:()=>o});var a,n=s(5125);let i=null!=(a=s(5704).env.NEXT_PUBLIC_API_URL)?a:"https://accounting-notes-backend.onrender.com",o=n.A.create({baseURL:i,withCredentials:!0,headers:{"Content-Type":"application/json"}})}},e=>{e.O(0,[566,8,977,441,255,358],()=>e(e.s=3690)),_N_E=e.O()}]);