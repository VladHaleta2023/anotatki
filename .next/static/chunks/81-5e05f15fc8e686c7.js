(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[81],{1371:(e,t,s)=>{"use strict";s.d(t,{A:()=>n});var a=s(5155);function n(){return(0,a.jsx)("div",{className:"spinner-container","aria-label":"Loading...",children:(0,a.jsx)("div",{className:"spinner"})})}s(2115),s(8293)},1775:(e,t,s)=>{"use strict";s.d(t,{A:()=>n});var a=s(5799);function n(e,t){e>=200&&e<300?a.oR.success(t):e>=400&&e<500?a.oR.warning(t):a.oR.error(t)}},2341:(e,t,s)=>{"use strict";s.d(t,{S0:()=>i,iU:()=>r});var a=s(5155),n=s(2115);function r(e){let t=e.split("\n");return t.map((e,s)=>(0,a.jsxs)(n.Fragment,{children:[e,s<t.length-1&&(0,a.jsx)("br",{})]},s))}function i(){return"true"===(sessionStorage.getItem("adminStatus")||"false")}},2514:(e,t,s)=>{"use strict";s.d(t,{A:()=>o});var a=s(5155),n=s(2115);s(9998),s(2576);var r=s(1775);function i(e){let{visible:t=!1,textConfirm:s="Confirm",textCancel:i="Cancel",isMessageVisible:o=!0,message:c="Message",children:l=null,bodyMaxWidth:u="600px",btnsWidth:d="200px",onClose:h,onConfirm:p}=e;if((0,n.useEffect)(()=>(t?(document.body.style.overflow="hidden",document.body.style.touchAction="none"):(document.body.style.overflow="",document.body.style.touchAction=""),()=>{document.body.style.overflow="",document.body.style.touchAction=""}),[t]),!t)return null;let m=async()=>{try{p&&await p()}catch(e){(0,r.A)(500,"Server error: ".concat(e))}};return(0,a.jsx)("div",{className:"popup-overlay",children:(0,a.jsxs)("div",{className:"switchPopUp word-break no-select",style:{maxWidth:u},children:[o?(0,a.jsx)("div",{className:"text",children:c}):null,l,(0,a.jsxs)("div",{className:"btnsSwitchPopUp",children:[(0,a.jsx)("button",{style:{width:d,maxWidth:d},className:"btnSwicthPopUp confirm",onClick:m,children:s}),(0,a.jsx)("button",{style:{width:d,maxWidth:d},className:"btnSwicthPopUp cancel",onClick:h,children:i})]})]})})}function o(e){let{visible:t=!0,message:s="Message",textConfirm:n="Yes",textCancel:r="No",btnsWidth:o="100px",bodyMaxWidth:c="600px",setVisible:l,onConfirm:u}=e,d=async()=>{try{u&&await u()}finally{l(!1)}};return(0,a.jsx)(i,{visible:t,onClose:()=>l(!1),onConfirm:d,isMessageVisible:!0,message:s,textConfirm:n,textCancel:r,bodyMaxWidth:c,btnsWidth:o})}},2576:()=>{},3265:(e,t,s)=>{"use strict";s.d(t,{A:()=>u});var a=s(5155),n=s(2115),r=s(1775),i=s(9637),o=s(2514),c=s(5695);function l(e){let{categories:t,activeCategory:s,activeTopic:r,visible:i=!0,setActiveCategory:o,setActiveTopic:l}=e,u=(0,c.useRouter)(),[d,h]=(0,n.useState)(!1),[p,m]=(0,n.useState)(new Set),g=(0,n.useRef)(null);(0,n.useEffect)(()=>{if(!i)return;let e=e=>{g.current&&!g.current.contains(e.target)&&h(!1)};return d?document.addEventListener("mousedown",e):document.removeEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}},[d,i]);let v=(e,t)=>{if(!i)return;let s=new Set(p);s.has(e)?s.delete(e):s.add(e),m(s),o(e,t),u.push("/")},y=(e,t,s,a)=>{i&&(l(e,t,s,a),u.push("/"))};return(0,n.useEffect)(()=>{if(!i)return;let e=()=>{let e=sessionStorage.getItem("activeCategory"),t=sessionStorage.getItem("activeCategoryName"),a=sessionStorage.getItem("activeTopic"),n=sessionStorage.getItem("activeTopicName");e&&t&&(!s||s!==e)&&o(e,t),a&&n&&(!r||r!==a)&&(l(null!=e?e:"",a,n,null!=t?t:""),m(t=>{let s=new Set(t);return e&&s.add(e),s}))};return window.addEventListener("storage",e),e(),()=>{window.removeEventListener("storage",e)}},[s,r,o,l,i]),(0,a.jsxs)("div",{className:"dropdown no-select word-break",ref:g,children:[(0,a.jsxs)("button",{className:"dropbtn",onClick:()=>{i&&h(e=>!e)},"aria-expanded":d,"aria-haspopup":"true","aria-label":"Toggle menu",children:[(0,a.jsx)("div",{className:"menuLine",style:{backgroundColor:d?"#577A99":"white"}}),(0,a.jsx)("div",{className:"menuLine",style:{backgroundColor:d?"#577A99":"white"}}),(0,a.jsx)("div",{className:"menuLine",style:{backgroundColor:d?"#577A99":"white"}})]}),(0,a.jsxs)("div",{className:"dropdown-content ".concat(d?"show":""),children:[(0,a.jsx)("div",{className:"element ".concat("Main Body"!==s||r?"":"active"),onClick:()=>v("Main Body","Kategorie"),children:(0,a.jsx)("span",{children:"Kategorie"})}),t.map(e=>{var t;return(0,a.jsxs)(n.Fragment,{children:[(0,a.jsxs)("div",{className:"element ".concat(s!==e.id||r?"":"active"),onClick:()=>{var t;return v(e.id,null!=(t=e.name)?t:"Nieznana")},children:[(0,a.jsx)("span",{children:null!=(t=e.name)?t:""}),e.topics.length>0&&(0,a.jsx)("span",{className:"dropIcon",children:p.has(e.id)?"▲":"▼"})]}),e.topics.length>0&&p.has(e.id)&&(0,a.jsx)("div",{className:"topics show",children:e.topics.map(t=>{var s;return(0,a.jsx)("div",{className:"element topic ".concat(r===t.id?"active":""),onClick:()=>{var s,a;return y(e.id,t.id,null!=(s=t.title)?s:"Nieznana",null!=(a=e.name)?a:"Nieznana")},children:null!=(s=t.title)?s:""},t.id)})})]},e.id)})]})]})}function u(e){let{visible:t=!0,categories:s=[],isAdminOn:u,activeCategory:d,activeCategoryName:h,activeTopic:p,activeTopicName:m,updateSelection:g}=e,v=(0,c.useRouter)(),[y,w]=(0,n.useState)(!1),f=async()=>{try{let e=await i.A.post("/users/admin/logout"),t=e.data.message[0];(0,r.A)(e.data.statusCode,t)}catch(s){if(s.response){var e,t;let a=s.response.status,n=(null==(t=s.response.data)||null==(e=t.message)?void 0:e[0])||"Unknown error";(0,r.A)(a,n)}else s.request?(0,r.A)(500,"No response from server"):(0,r.A)(500,"Request setup error")}finally{sessionStorage.setItem("adminStatus","false"),w(!1),window.location.reload()}},A=async()=>{u?w(!0):v.push("/admin")};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(o.A,{visible:y,setVisible:w,message:"Czy na pewno chcesz wyłączyć tryb Admina?",textConfirm:"Tak",textCancel:"Nie",onConfirm:async()=>{await f()}}),(0,a.jsxs)("header",{className:"header",children:[(0,a.jsx)(l,{visible:t,categories:s,activeCategory:d,activeCategoryName:h,activeTopic:p,activeTopicName:m,setActiveCategory:(e,t)=>g(e,t,null,null),setActiveTopic:(e,t,s,a)=>g(e,null!=a?a:h,t,s)}),(0,a.jsx)("span",{style:{fontSize:"26px",marginLeft:"14px"},children:"ANotatki"}),(0,a.jsxs)("button",{className:"btnHeader",onClick:A,children:["Admin: ",u?"on":"off"]})]})]})}s(9998),s(6909),s(5933)},5933:()=>{},6909:()=>{},8293:()=>{},9232:()=>{},9637:(e,t,s)=>{"use strict";s.d(t,{A:()=>i});var a,n=s(3464);let r=null!=(a=s(9509).env.NEXT_PUBLIC_API_URL)?a:"https://accounting-notes-backend.onrender.com",i=n.A.create({baseURL:r,withCredentials:!0,headers:{"Content-Type":"application/json"}})},9723:(e,t,s)=>{"use strict";s.d(t,{s:()=>r});var a=s(9637),n=s(1775);class r{static handleError(e){var t,s,a,r,i,o,c;let l=(null==(t=e.response)?void 0:t.status)||500,u=Array.isArray(null==(a=e.response)||null==(s=a.data)?void 0:s.message)?null==(i=e.response)||null==(r=i.data)?void 0:r.message[0]:(null==(c=e.response)||null==(o=c.data)?void 0:o.message)||"Unknown error";(0,n.A)(l,u)}static handleResponseMessage(e,t){let s=Array.isArray(t)?t[0]:t||"OK";(0,n.A)(e,s)}static async request(e,t,s){try{let n;switch(e){case"get":n=await a.A.get(t);break;case"post":n=await a.A.post(t,s);break;case"put":n=await a.A.put(t,s);break;case"delete":n=await a.A.delete(t);break;default:throw Error("Unsupported method")}return n.data}catch(e){return this.handleError(e),null}}static async fetchTopics(e){try{var t;let s=await this.request("get","/categories/".concat(e,"/topics"));if(s&&200===s.statusCode&&s.data)return s.data;let a=(null==s||null==(t=s.message)?void 0:t[0])||"Unknown error";return(0,n.A)((null==s?void 0:s.statusCode)||500,a),[]}catch(e){return(0,n.A)(500,String(e)),[]}}static async createTopic(e,t){let s=await this.request("post","/categories/".concat(e,"/topics"),{title:t});return!!s&&(this.handleResponseMessage(s.statusCode||200,s.message),!0)}static async fetchTopicByIdTitle(e,t){if(!t||"Main Body"===t)return"";try{var s,a;let r=await this.request("get","/categories/".concat(e,"/topics/").concat(t));if(r&&200===r.statusCode&&(null==(s=r.data)?void 0:s.current))return r.data.current.title;let i=(null==r||null==(a=r.message)?void 0:a[0])||"Unknown error";return(0,n.A)((null==r?void 0:r.statusCode)||500,i),""}catch(e){return(0,n.A)(500,String(e)),""}}static async fetchTopicById(e,t){if(!t||"Main Body"===t)return null;try{var s,a;let r=await this.request("get","/categories/".concat(e,"/topics/").concat(t));if(r&&200===r.statusCode&&(null==(s=r.data)?void 0:s.current))return r.data;let i=(null==r||null==(a=r.message)?void 0:a[0])||"Unknown error";return(0,n.A)((null==r?void 0:r.statusCode)||500,i),null}catch(e){return(0,n.A)(500,String(e)),null}}static async updateTopic(e,t,s){let a=await this.request("put","/categories/".concat(e,"/topics/").concat(t),{title:s});return!!a&&(this.handleResponseMessage(a.statusCode||200,a.message),!0)}static async updateTopicNotes(e,t,s){let a=await this.request("put","/categories/".concat(e,"/topics/").concat(t,"/notes"),{content:s});return!!a&&(this.handleResponseMessage(a.statusCode||200,a.message),!0)}static async deleteTopic(e,t){let s=await this.request("delete","/categories/".concat(e,"/topics/").concat(t));return!!s&&(this.handleResponseMessage(s.statusCode||200,s.message),!0)}constructor(){}}},9756:(e,t,s)=>{"use strict";s.d(t,{v:()=>r});var a=s(9637),n=s(1775);class r{static handleError(e){var t,s,a,r,i,o,c;let l=(null==(t=e.response)?void 0:t.status)||500,u=Array.isArray(null==(a=e.response)||null==(s=a.data)?void 0:s.message)?null==(i=e.response)||null==(r=i.data)?void 0:r.message[0]:(null==(c=e.response)||null==(o=c.data)?void 0:o.message)||"Unknown error";(0,n.A)(l,u)}static handleResponseMessage(e,t){let s=Array.isArray(t)?t[0]:t||"OK";(0,n.A)(e,s)}static async request(e,t,s){try{let n;switch(e){case"get":n=await a.A.get(t);break;case"post":n=await a.A.post(t,s);break;case"put":n=await a.A.put(t,s);break;case"delete":n=await a.A.delete(t);break;default:throw Error("Unsupported method")}return n.data}catch(e){return this.handleError(e),null}}static async fetchCategories(){try{var e;let t=await this.request("get","/categories");if(t&&200===t.statusCode&&t.data)return t.data;let s=(null==t||null==(e=t.message)?void 0:e[0])||"Unknown error";return(0,n.A)((null==t?void 0:t.statusCode)||500,s),[]}catch(e){return(0,n.A)(500,String(e)),[]}}static async createCategory(e){let t=await this.request("post","/categories",{name:e});return!!t&&(this.handleResponseMessage(t.statusCode||200,t.message),!0)}static async updateCategory(e,t){let s=await this.request("put","/categories/".concat(e),{name:t});return!!s&&(this.handleResponseMessage(s.statusCode||200,s.message),!0)}static async deleteCategory(e){let t=await this.request("delete","/categories/".concat(e));return!!t&&(this.handleResponseMessage(t.statusCode||200,t.message),!0)}constructor(){}}},9998:()=>{}}]);